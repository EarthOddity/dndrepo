@* @using System.Globalization

<div class="calendar-day">
    <div class="day-header">
        @Day.ToString("ddd dd", CultureInfo.CurrentCulture)
    </div>
    <div class="day-slots">
        @for (int hour = 0; hour < 24; hour++)
        {
            var hourEvents = Events.Where(e => e.startTime.Hour == hour).ToList();
                <div class="hour-slot @(hourEvents.Any() ? "has-events" : "")" @onclick="() => OpenEventModal(hour)">
                @foreach (var evt in hourEvents)
                {
                            <SBEvent Event="evt" />
                }
                </div>
        }
    </div>
</div>

@code {
    [Parameter] public DateTime Day { get; set; }
    [Parameter] public List<SBEvent> Events { get; set; } = new();
    [Parameter] public EventCallback<(DateTime date, int hour)> OnBookEvent { get; set; }

    private async Task OpenEventModal(int hour)
    {
        await OnBookEvent.InvokeAsync((Day, hour));
    }
} *@

@inject NavigationManager NavigationManager
@using System.Globalization

<div class="calendar-day">
    <div class="day-header">
        <p> Your day-slots</p>
    </div>
    <div class="day-slots">
       @foreach (var evt in Events.OrderByDescending(e => e.Timestamp))
        {
            <div class="event-card">
                <h3>@evt.Title</h3>
                <p>@evt.Description</p>
                <p>@evt.Timestamp</p>
                <p>@evt.StartTime.ToString("HH:mm") - @evt.EndTime.ToString("HH:mm")</p>
            </div>
        }
    </div>
</div>

@code {

    [Parameter] public DateTime Day { get; set; }
    [Parameter] public List<SBEvent> Events { get; set; } = new();
    [Parameter] public EventCallback<(DateTime date, int hour)> OnBookEvent { get; set; }

    private async Task OpenEventModal(int hour)
    {
        await OnBookEvent.InvokeAsync((Day, hour));
    }
}

<style>
    .calendar-day {
        min-width: 150px;
        flex-grow: 1;
        border-right: 1px solid #e0e6ed;
        position: relative;
    }

    .day-header {
        text-align: center;
        padding: 10px;
        background-color: #f8fafc;
        border-bottom: 1px solid #e0e6ed;
        font-weight: 600;
        color: #4a5568;
    }

    .day-slots {
        position: relative;
    }

    .hour-slot {
        height: 60px;
        border-bottom: 1px solid #e0e6ed;
        background-color: #ffffff;
        position: relative;
        transition: background-color 0.2s ease;
    }

    .hour-slot:hover {
        background-color: rgba(66, 153, 225, 0.05);
    }

    .hour-slot.has-events {
        background-color: #f0f4f8;
    }
</style>